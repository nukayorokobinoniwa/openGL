#include <stdio.h>
#include <stdlib.h>
#include <GLFW/glfw3.h>

GLFWwindow* Window;

#define WIDTH  512
#define HEIGHT 512

unsigned char Fb[HEIGHT][WIDTH][3];

char DOTFIG[6][16][18]={
  {"2333333333333331",
   "3233333333333311",
   "3323333333333111",
   "3332333333331111",
   "3333222222221111",
   "3333222222221111",
   "3333222222221111",
   "3333222222221111",
   "3333222222221111",
   "3333222222221111",
   "3333222222221111",
   "3333222222221111",
   "3331111111112111",
   "3311111111111211",
   "3111111111111121",
   "1111111111111112"},
  {"0222222222222220",
   "2444444444444441",
   "2414444444444121",
   "2444422222444441",
   "2444221112244441",
   "2444221442214441",
   "2444221442214441",
   "2444411422214441",
   "2444444221114441",
   "2444444221444441",
   "2444444411444441",
   "2444444224444441",
   "2444444221444441",
   "2414444411444141",
   "2444444444444441",
   "1111111111111111"},
  {"0000000000000000",
   "0000006666600777",
   "0000066666666677",
   "0000055577570555",
   "0000575777577555",
   "0000575577757775",
   "0000557777555550",
   "0000007777777500",
   "0055555655565000",
   "0555555565556000",
   "7755555566666005",
   "7770665660660655",
   "0705666666666655",
   "0055566666666655",
   "0555666666600000",
   "0500666600000000"},
  {"3333333333333333",
   "2222222122222221",
   "2222222122222221",
   "1111111111111111",
   "2221222222212222",
   "2221222222212222",
   "2221222222212222",
   "1111111111111111",
   "2222222122222221",
   "2222222122222221",
   "2222222122222221",
   "1111111111111111",
   "2221222222212222",
   "2221222222212222",
   "2221222222212222",
   "1111111111111111"},
  {"0000008888000000",
   "0000088886600000",
   "0000888866660000",
   "0008888866666000",
   "0088888886668800",
   "0886668888888880",
   "0866666888888880",
   "8866666888886688",
   "8866666888886668",
   "8886668888888668",
   "8888888888888888",
   "0866677777766680",
   "0000777777770000",
   "0000777777870000",
   "0000777777870000",
   "0000077778700000"},
  {"2333333331233332",
   "3222222221322221",
   "3222222221322221",
   "3222222221322221",
   "3222222221312221",
   "3222222221211112",
   "3222222221333331",
   "3222222221322221",
   "3222222221322221",
   "3222222221322221",
   "1122222213222221",
   "3311222213222221",
   "3233111132222221",
   "3222333132222221",
   "3222222132222211",
   "2111111231111112"}
};

unsigned char COLORMAP[9][3]={
  {0x41, 0x69, 0xE1}, // 0 - RoyalBlue(Background)
  {0x00, 0x00, 0x00}, // 1 - Black
  {0xD2, 0x69, 0x1E}, // 2 - Chocolate
  {0xF4, 0xA4, 0x60}, // 3 - SandyBrown
  {0xFF, 0x8C, 0x00}, // 4 - DarkOrange
  {0x6B, 0x8E, 0x23}, // 5 - OliveDrab
  {0xFF, 0x45, 0x00}, // 6 - OrangeRed
  {0xFF, 0xFA, 0xCD}, // 7 - LemonChiffon
  {0xFF, 0xA5, 0x00}, // 8 - Orange
};


int main(int argc, char** argv)
{
    /* Initialize the library */
    if (!glfwInit())
        return -1;

    /* Create a windowed mode window and its OpenGL context */
    Window = glfwCreateWindow(WIDTH, HEIGHT, "OpenGL Test", NULL, NULL);
    if (!Window)
    {
        glfwTerminate();
        return -1;
    }

    /* Make the window's context current */
    glfwMakeContextCurrent(Window);

    // Set vsync(1;default) or not(0)
    glfwSwapInterval(1);

    /* Loop until the user closes the window */
    while (!glfwWindowShouldClose(Window))
    {
      /* Modify frame buffer */
      int x,y;
      // Initialize with background color
      for(y=0; y<HEIGHT; y++){
	for(x=0; x<WIDTH; x++){
	  Fb[y][x][0] = 0;   // Red 
	  Fb[y][x][1] = 255; // Green
	  Fb[y][x][2] = 255; // Blue
	}
      }

      /*
      // Display Mario block
      for(y=0; y<16; y++){
	for(x=0; x<16; x++){
	  Fb[y][x][0] = COLORMAP[ DOTFIG[0][y][x]-'0' ][0];
	  Fb[y][x][1] = COLORMAP[ DOTFIG[0][y][x]-'0' ][1];
	  Fb[y][x][2] = COLORMAP[ DOTFIG[0][y][x]-'0' ][2];
	}
      }
      */

      /* Copy framebuffer to window area */
      glDrawPixels(WIDTH,HEIGHT,GL_RGB,GL_UNSIGNED_BYTE,Fb);

      /* Swap front and back buffers */
      glfwSwapBuffers(Window);
      
      /* Poll for and process events */
      glfwPollEvents();
    }
    
    glfwTerminate();

    return 0;
}
